#!/usr/bin/env python2.6

def usage():
    print(' '.join(["Usage:", sys.argv[0], '[-p] MRT_RIB_FILE']))
    print("""Produces intermediate text-based routing table (.txt) and peer
table (.peer) based on supplied MRT_RIB_FILE.

Optional flag -p will include peer ip addresses to determine unique neighbors.
""")

def main():
    include_peer_ip = False
    if 1 < len(sys.argv) < 4:
        if len(sys.argv) == 2:
            full_path = os.path.realpath(sys.argv[1])
        else:
            if sys.argv[1] == '-p':
                include_peer_ip = True
            else:
                usage()
                exit()
            full_path = os.path.realpath(sys.argv[2])
        generate_files(full_path, include_peer_ip)
    else:
        usage()

if __name__ == '__main__':
    main()
